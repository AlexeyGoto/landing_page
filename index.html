<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>DED_SW ‚Äî Virtual Gaming Club</title>
  <meta name="description" content="DED_SW ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π –∫–ª—É–±: –º–æ—â–Ω–æ–µ –∂–µ–ª–µ–∑–æ, –∏–≥—Ä—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –¥–æ—Å—Ç—É–ø 24/7."/>
  <meta name="theme-color" content="#0b0b12"/>
  <link rel="preload" href="assets/ded-sw-hero.jpg" as="image"/>
  <style>
    :root{
      --bg:#0b0b12; --glass:rgba(15,15,25,.55); --border:rgba(255,255,255,.08);
      --fg:#e9ecf1; --muted:#b9c0cc; --accent:#00e0ff; --accent2:#c850ff;
      --radius:20px; --shadow:0 10px 30px rgba(0,0,0,.35), 0 2px 10px rgba(0,0,0,.25);
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;color:var(--fg);font:16px/1.55 Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Arial,"Noto Sans",sans-serif;background:var(--bg);overflow-x:hidden}
    #bg{position:fixed;inset:-4vh -4vw;background:url("assets/ded-sw-hero.jpg") center/cover no-repeat;filter:brightness(.52) saturate(1.1) contrast(1.05);transform:scale(1.06);z-index:-2;will-change:transform}
    #bg::after{content:"";position:absolute;inset:0;background:
      radial-gradient(1200px 600px at 10% -10%, rgba(0,224,255,.18), transparent 60%),
      radial-gradient(1200px 600px at 110% 110%, rgba(200,80,255,.18), transparent 60%),
      linear-gradient(to bottom, rgba(0,0,0,.25), rgba(0,0,0,.55) 35%, rgba(0,0,0,.75))}
    header{padding:24px 20px 0}
    .shell{width:min(1100px,92vw);margin:0 auto}
    .hero{margin:clamp(18px,4vw,28px) 0 22px;display:grid;grid-template-columns:1fr;gap:18px}
    .brand{display:flex;align-items:center;gap:16px;text-shadow:0 0 12px rgba(0,224,255,.45),0 0 24px rgba(200,80,255,.35)}
    .logo{width:64px;height:64px;border-radius:16px;background:linear-gradient(145deg, rgba(0,224,255,.5), rgba(200,80,255,.5));box-shadow:inset 0 0 35px rgba(255,255,255,.15),0 8px 20px rgba(0,0,0,.5)}
    h1{margin:0;font-size:clamp(28px,5vw,44px);font-weight:800;letter-spacing:.5px;line-height:1.05}
    .subtitle{margin:0;color:var(--muted);font-size:clamp(14px,2.6vw,16px)}
    .cta{display:flex;flex-wrap:wrap;gap:12px;margin-top:6px}
    .btn{--pad:12px 18px;display:inline-flex;align-items:center;justify-content:center;gap:10px;padding:var(--pad);border-radius:999px;border:1px solid var(--border);background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));color:var(--fg);text-decoration:none;font-weight:700;backdrop-filter:blur(8px);box-shadow:var(--shadow);transition:transform .15s,box-shadow .15s,border-color .15s}
    .btn:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.18)} .btn:active{transform:translateY(0) scale(.99)}
    .btn.primary{background:linear-gradient(90deg, rgba(0,224,255,.35), rgba(200,80,255,.35));border:1px solid rgba(255,255,255,.22)}
    .card{background:var(--glass);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;position:relative}
    .card .content{padding:18px 18px 16px}
    .card h2{margin:0 0 10px;font-size:clamp(18px,3.8vw,24px);letter-spacing:.2px;text-shadow:0 0 14px rgba(0,224,255,.35),0 0 14px rgba(200,80,255,.25)}
    .grid{display:grid;gap:14px;grid-template-columns:1fr}
    @media (min-width:860px){.grid{grid-template-columns:1.1fr .9fr}}
    .hardware-img{width:100%;height:auto;display:block;border-bottom:1px solid var(--border);object-fit:cover;max-height:260px}
    details{border:1px dashed rgba(255,255,255,.12);border-radius:14px;padding:10px 12px;background:rgba(255,255,255,.02)}
    details[open]{background:rgba(255,255,255,.04)} summary{cursor:pointer;list-style:none;font-weight:700}
    summary::-webkit-details-marker{display:none}
    summary:before{content:"+";display:inline-grid;place-items:center;width:22px;height:22px;margin-right:8px;border-radius:6px;border:1px solid var(--border);background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));font-weight:900}
    details[open] summary:before{content:"‚Äì"} ul{margin:8px 0 0 18px;padding:0} li{margin:4px 0}
    footer{text-align:center;color:var(--muted);padding:28px 0 40px;font-size:14px}
    .neon{position:relative;display:inline-block}
    .neon:after{content:"";position:absolute;left:0;right:0;bottom:-3px;height:2px;background:linear-gradient(90deg,var(--accent),var(--accent2));filter:blur(.4px);opacity:.75}
    .toast{position:fixed;left:50%;bottom:22px;transform:translateX(-50%);background:rgba(20,20,30,.9);color:var(--fg);padding:10px 14px;border-radius:12px;border:1px solid var(--border);box-shadow:var(--shadow);z-index:50;opacity:0;pointer-events:none;transition:opacity .15s}
    .toast.show{opacity:1}
    .visits{opacity:.65;font-size:12px;margin-top:6px}

    /* –ú–æ–¥–∞–ª–∫–∞ –æ—Ç–∑—ã–≤–∞ */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:18px;z-index:40}
    .modal.open{display:flex}
    .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.55);backdrop-filter: blur(3px)}
    .dialog{position:relative;width:min(720px, 96vw);background:var(--glass);border:1px solid var(--border);border-radius:20px;box-shadow:var(--shadow);overflow:hidden}
    .dialog .head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border)}
    .dialog .head h3{margin:0;font-size:18px}
    .dialog .body{padding:14px 16px}
    .dialog .row{display:grid;gap:10px;margin-bottom:12px}
    @media(min-width:720px){ .dialog .row.split{ grid-template-columns:1fr 1fr } }
    label{font-size:13px;color:var(--muted)}
    input,select,textarea{
      width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--border);
      background:rgba(255,255,255,.04); color:var(--fg); outline:none;
      transition:border-color .15s, box-shadow .15s;
    }
    input:focus,select:focus,textarea:focus{
      border-color:rgba(255,255,255,.22);
      box-shadow:0 0 0 3px rgba(0,224,255,.15), inset 0 1px 0 rgba(255,255,255,.05);
    }
    textarea{min-height:120px; resize:vertical}
    .dialog .foot{display:flex;gap:10px;justify-content:flex-end;padding:12px 16px;border-top:1px solid var(--border)}
    .danger{border-color:rgba(255,80,80,.35)!important}
    .small{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div id="bg" aria-hidden="true"></div>

  <header class="shell">
    <div class="hero">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>DED-SW <span class="neon">Virtual Gaming Club</span></h1>
          <p class="subtitle">–ú–æ—â–Ω–æ–µ –∂–µ–ª–µ–∑–æ. –ò–≥—Ä—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã. –î–æ—Å—Ç—É–ø 24/7.</p>
        </div>
      </div>

      <div class="cta">
        <a id="tgBtn" class="btn primary" href="https://t.me/ded_swjr" target="_blank" rel="noopener">üí¨ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –≤ Telegram</a>
        <a class="btn" href="https://fogplay.mts.ru/promo/computer/ded_sw/" target="_blank" rel="noopener">‚ö° –ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å —Å–æ —Å–∫–∏–¥–∫–æ–π</a>
        <button class="btn" id="openFeedback" type="button">‚úç –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –Ω–∞ —Å–∞–π—Ç–µ</button>
        <button class="btn" id="bookmarkBtn" type="button" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–∫–ª–∞–¥–∫–∏">‚≠ê –í –∑–∞–∫–ª–∞–¥–∫–∏</button>
      </div>
      <div id="visits" class="visits"></div>
    </div>
  </header>

  <main class="shell grid" id="main">
    <section class="card">
      <img class="hardware-img" src="assets/6suo0IrMmuYjvTBz7JTuXVXpulTdiB-E.jpg" alt="–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –∂–µ–ª–µ–∑–æ ‚Äî DED_SW"/>
      <div class="content">
        <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ DED_SW</h2>
        <p>–£ –Ω–∞—Å –≤–∞—Å –∂–¥—É—Ç –º–æ—â–Ω—ã–µ –ü–ö –∏ –Ω–µ—Å–∫–æ–Ω—á–∞–µ–º—ã–µ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è. <strong>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å 24/7</strong> ‚Äî –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã –∫ GTA V, Hogwarts Legacy –∏–ª–∏ –¥–æ–ª–≥–æ–∂–¥–∞–Ω–Ω–æ–º—É S.T.A.L.K.E.R. 2 —Å —Ä—É—Å—Å–∫–æ–π –æ–∑–≤—É—á–∫–æ–π.</p>

        <details open>
          <summary>–ñ–µ–ª–µ–∑–æ</summary>
          <ul>
            <li><strong>–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã:</strong> Intel Core i5-12400F, i5-14400F</li>
            <li><strong>–í–∏–¥–µ–æ–∫–∞—Ä—Ç—ã:</strong> NVIDIA GeForce RTX 3060 / 4060 Ti / 5060 / 5070</li>
          </ul>
        </details>

        <details>
          <summary>–£–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ</summary>
          <ul>
            <li>Cyberpunk 2077 + Phantom Liberty</li>
            <li>Hogwarts Legacy ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ä—É—Å—Å–∫–∞—è –æ–∑–≤—É—á–∫–∞</li>
            <li>S.T.A.L.K.E.R. 2: Heart of Chernobyl ‚Äî Ultimate Edition ‚Äî —Ä—É—Å—Å–∫–∞—è –æ–∑–≤—É—á–∫–∞, —É—Å–∫–æ—Ä–µ–Ω –∑–∞–ø—É—Å–∫</li>
            <li>Marvel‚Äôs Spider-Man Remastered ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ —Ä—É—Å—Å–∫–æ–º</li>
            <li>Grand Theft Auto V, God of War: Ragnar√∂k</li>
            <li>Counter-Strike 2, Dota 2</li>
            <li>Red Dead Redemption 2, Genshin Impact</li>
            <li>Arena Breakout: Infinite, Rust</li>
            <li>The Last of Us Part II</li>
          </ul>
          <p style="margin-left:18px">–í—Å–µ —Å—é–∂–µ—Ç–Ω—ã–µ –∏–≥—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–µ—Ä–µ–Ω–æ—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π –∏–∑ –æ–±–ª–∞–∫–∞.</p>
        </details>

        <details>
          <summary>–í –æ–∂–∏–¥–∞–Ω–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏</summary>
          <ul><li>Baldur‚Äôs Gate 3</li><li>BeamNG.drive</li></ul>
        </details>
      </div>
    </section>

    <aside class="card">
      <div class="content">
        <h2>–ü–æ–¥—Å–∫–∞–∑–∫–∏</h2>
        <p>–û—Å–Ω–æ–≤–Ω–æ–π –∫–∞–Ω–∞–ª –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ ‚Äî <a href="https://t.me/ded_swjr" target="_blank" rel="noopener">Telegram @ded_swjr</a>. –ù–∏–∂–µ ‚Äî –∫–Ω–æ–ø–∫–∞, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –ø—Ä—è–º–æ –Ω–∞ —Å–∞–π—Ç–µ.</p>

        <details open>
          <summary>–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏</summary>
          <ul>
            <li><strong>CTRL+SHIFT</strong> ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞</li>
            <li><strong>ALT+M</strong> ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∫–∞—á–µ—Å—Ç–≤–∞ –∏ –∫—É—Ä—Å–æ—Ä–∞ (—Å—Ç–∞–≤—å—Ç–µ <em>¬´–£–ª—å—Ç—Ä–∞¬ª</em>, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ <strong>1920√ó1080</strong>)</li>
            <li><strong>ALT+ENTER</strong> ‚Äî –æ–∫–æ–Ω–Ω—ã–π/–ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º. –ï—Å–ª–∏ ¬´–µ—Å—Ç—å –∑–≤—É–∫, –∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ—Ç¬ª ‚Äî —Å–≤–µ—Ä–Ω–∏—Ç–µ/—Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –∏ –≤—ã—Å—Ç–∞–≤—å—Ç–µ <strong>1920√ó1080</strong>, –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π ¬´—ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π¬ª –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ</li>
            <li><strong>ALT+TAB</strong> ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –æ–∫–æ–Ω</li>
            <li><strong>ALT+F4</strong> ‚Äî –∑–∞–∫—Ä—ã—Ç—å –∏–≥—Ä—É</li>
            <li><strong>CTRL+Q</strong> ‚Äî –∑–∞–∫—Ä—ã—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é –ø–∞–Ω–µ–ª—å</li>
            <li><strong>CTRL+SHIFT+F</strong> ‚Äî —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –±—Ä–∞—É–∑–µ—Ä –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω</li>
          </ul>
        </details>

        <div class="cta" style="margin-top:14px">
          <button class="btn primary" id="openFeedback2" type="button">üìù –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –Ω–∞ —Å–∞–π—Ç–µ</button>
        </div>
      </div>
    </aside>
  </main>

  <footer class="shell">
    <p>–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –∑–∞–≥–ª—è–Ω—É–ª–∏! –ñ–¥—ë–º –≤–∞—Å –≤ –∏–≥—Ä–µ ‚ö°</p>
  </footer>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–∑—ã–≤–∞ -->
  <div class="modal" id="feedbackModal" aria-hidden="true" aria-labelledby="fbTitle" role="dialog">
    <div class="backdrop" data-close></div>
    <form class="dialog" id="feedbackForm">
      <div class="head">
        <h3 id="fbTitle">–û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤</h3>
        <a href="https://t.me/ded_swjr" target="_blank" rel="noopener" class="btn small">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram</a>
      </div>
      <div class="body">
        <div class="row split">
          <div>
            <label for="game">–ò–≥—Ä–∞</label>
            <input id="game" name="game" list="games" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: S.T.A.L.K.E.R. 2" required>
            <datalist id="games">
              <option>Cyberpunk 2077 + Phantom Liberty</option>
              <option>Hogwarts Legacy</option>
              <option>S.T.A.L.K.E.R. 2: Heart of Chernobyl</option>
              <option>Marvel's Spider-Man Remastered</option>
              <option>Grand Theft Auto V</option>
              <option>God of War: Ragnar√∂k</option>
              <option>Counter-Strike 2</option>
              <option>Dota 2</option>
              <option>Red Dead Redemption 2</option>
              <option>Genshin Impact</option>
              <option>Arena Breakout: Infinite</option>
              <option>Rust</option>
              <option>The Last of Us Part II</option>
              <option>Baldur‚Äôs Gate 3</option>
              <option>BeamNG.drive</option>
            </datalist>
          </div>
          <div>
            <label for="pc">–ö–æ–º–ø—å—é—Ç–µ—Ä (–Ω–æ–º–µ—Ä/–Ω–∞–∑–≤–∞–Ω–∏–µ)</label>
            <input id="pc" name="pc" list="pcs" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: PC-3 –∏–ª–∏ DED-SW#2" required>
            <datalist id="pcs">
              <option>PC-1</option><option>PC-2</option><option>PC-3</option><option>PC-4</option>
            </datalist>
          </div>
        </div>

        <div class="row">
          <label for="review">–û—Ç–∑—ã–≤</label>
          <textarea id="review" name="review" placeholder="–ß—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å, —á—Ç–æ —É–ª—É—á—à–∏—Ç—å ‚Äî –ª–∞–≥–∏, –∫–∞—Ä—Ç–∏–Ω–∫–∞, –∑–≤—É–∫‚Ä¶" required></textarea>
        </div>

        <div class="row split">
          <div>
            <label for="contact">–ö–æ–Ω—Ç–∞–∫—Ç –¥–ª—è —Å–≤—è–∑–∏ (Telegram)</label>
            <input id="contact" name="contact" placeholder="@nickname –∏–ª–∏ —Å—Å—ã–ª–∫–∞" pattern="^(@|https?:\/\/t\.me\/)?[A-Za-z0-9_]{5,}$" required>
            <div class="small">–ú—ã –æ—Ç–≤–µ—Ç–∏–º –≤–∞–º –≤ Telegram.</div>
          </div>
          <div>
            <label for="rate">–û—Ü–µ–Ω–∫–∞</label>
            <select id="rate" name="rate">
              <option value="5">5 ‚Äî –æ–≥–æ–Ω—å üî•</option>
              <option value="4">4 ‚Äî –æ—Ç–ª–∏—á–Ω–æ</option>
              <option value="3">3 ‚Äî –Ω–æ—Ä–º</option>
              <option value="2">2 ‚Äî —Ç–∞–∫ —Å–µ–±–µ</option>
              <option value="1">1 ‚Äî –ø–ª–æ—Ö–æ</option>
            </select>
          </div>
        </div>

        <div class="small">–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ç–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ –∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –æ–∫–Ω–æ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram.</div>
      </div>
      <div class="foot">
        <button type="button" class="btn" data-close>–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" class="btn primary">üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram</button>
      </div>
    </form>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞: –∑–∞–º–µ–Ω–∏—Ç–µ YOUR_METRIKA_ID -->
  <script>
    (function initMetrika(){
      const ID = 'YOUR_METRIKA_ID';
      if(!/^\d+$/.test(ID)) return;
      (function(m,e,t,r,i,k,a){ m[i]=m[i]||function(){ (m[i].a=m[i].a||[]).push(arguments) };
        m[i].l=1*new Date(); k=e.createElement(t), a=e.getElementsByTagName(t)[0];
        k.async=1; k.src=r; a.parentNode.insertBefore(k,a)
      })(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
      ym(ID, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true });
      window.ymID = ID;
    })();
  </script>

  <script>
    // ===== —É—Ç–∏–ª–∏—Ç—ã =====
    const $ = (s, r=document) => r.querySelector(s);
    const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));
    const toast = (msg, ms=1800) => { const t=$("#toast"); t.textContent=msg; t.classList.add("show"); setTimeout(()=>t.classList.remove("show"), ms); };

    // –ü–∞—Ä–∞–ª–ª–∞–∫—Å
    (function(){
      const bg = document.getElementById('bg'); let req=null;
      addEventListener('pointermove', e => {
        if(req) cancelAnimationFrame(req);
        req = requestAnimationFrame(()=>{
          const dx=(e.clientX/innerWidth-.5)*8, dy=(e.clientY/innerHeight-.5)*8;
          bg.style.transform=`translate3d(${dx}px,${dy}px,0) scale(1.06)`;
        });
      }, {passive:true});
    })();

    // –ê–Ω–∏–º–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
    (function(){
      const io = new IntersectionObserver(entries=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            e.target.animate([{opacity:0,transform:'translateY(12px)'},{opacity:1,transform:'none'}],
                             {duration:380,easing:'cubic-bezier(.2,.8,.2,1)',fill:'both'});
            io.unobserve(e.target);
          }
        });
      }, {threshold:.15});
      $$('.card').forEach(el=>io.observe(el));
    })();

    // –ö–Ω–æ–ø–∫–∞ ¬´–í –∑–∞–∫–ª–∞–¥–∫–∏¬ª
    (function(){
      const btn = $('#bookmarkBtn');
      const isApple = /Mac|iPhone|iPad/i.test(navigator.platform) || /Mac OS|iPhone|iPad/i.test(navigator.userAgent);
      const combo = isApple ? '‚åò+D' : 'Ctrl+D';
      btn.addEventListener('click', ()=>{
        try{
          if(window.sidebar?.addPanel){ window.sidebar.addPanel(document.title, location.href, ""); toast('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∑–∞–∫–ª–∞–¥–∫–∏'); return; }
          if(window.external?.AddFavorite){ window.external.AddFavorite(location.href, document.title); toast('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∑–∞–∫–ª–∞–¥–∫–∏'); return; }
        }catch{}
        if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){
          toast('–ù–∞–∂–º–∏—Ç–µ ¬´–ü–æ–¥–µ–ª–∏—Ç—å—Å—è¬ª ‚Üí ¬´–í –∑–∞–∫–ª–∞–¥–∫–∏¬ª –∏–ª–∏ ¬´–ù–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π¬ª.', 2600);
        }else if(/Safari/i.test(navigator.userAgent) && !/Chrome/i.test(navigator.userAgent)){
          toast(`–ú–µ–Ω—é Safari ‚Üí ¬´–î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫–ª–∞–¥–∫—É¬ª (${combo}).`, 2200);
        }else{
          toast(`–ù–∞–∂–º–∏—Ç–µ ${combo} —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–∫–ª–∞–¥–∫–∏.`, 1800);
        }
      });
    })();

    // –°—á—ë—Ç—á–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (CountAPI)
    (function(){
      const el = $('#visits');
      fetch('https://api.countapi.xyz/hit/ded-sw-landing/qr')
        .then(r=>r.json()).then(d=>{ if(d && d.value!=null){ el.textContent = '–ü–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–µ: ' + d.value; }})
        .catch(()=>{ el.textContent = ''; });
    })();

    // ===== –ú–æ–¥–∞–ª–∫–∞/—Ñ–æ—Ä–º–∞ –æ—Ç–∑—ã–≤–∞ =====
    (function(){
      const modal = $('#feedbackModal');
      const form  = $('#feedbackForm');
      const openers = [$('#openFeedback'), $('#openFeedback2')].filter(Boolean);

      const open = ()=>{ modal.classList.add('open'); modal.setAttribute('aria-hidden','false'); $('#game')?.focus(); };
      const close= ()=>{ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); };

      openers.forEach(b=>b.addEventListener('click', open));
      modal.addEventListener('click', e=>{ if(e.target.matches('[data-close], .backdrop')) close(); });
      addEventListener('keydown', e=>{ if(e.key==='Escape' && modal.classList.contains('open')) close(); });

      // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞
      const LSKEY = 'ded_sw_feedback';
      const saveDraft = ()=> {
        const data = Object.fromEntries(new FormData(form).entries());
        localStorage.setItem(LSKEY, JSON.stringify(data));
      };
      const loadDraft = ()=> {
        const raw = localStorage.getItem(LSKEY); if(!raw) return;
        try{
          const data = JSON.parse(raw);
          Object.entries(data).forEach(([k,v])=>{ const el=form.elements[k]; if(el) el.value=v; });
        }catch{}
      };
      loadDraft();
      form.addEventListener('input', saveDraft);

      function sanitizeHandle(s){
        s = (s||'').trim();
        if (s.startsWith('https://t.me/')) s = s.replace('https://t.me/','');
        if (!s.startsWith('@')) s = '@'+s;
        return s;
      }

      function confetti(x=window.innerWidth/2, y=window.innerHeight-30){
        for(let i=0;i<24;i++){
          const p=document.createElement('span');
          p.textContent='‚ú¶';
          p.style.position='fixed';
          p.style.left=x+'px'; p.style.top=y+'px';
          p.style.fontSize=(12+Math.random()*10)+'px';
          p.style.pointerEvents='none';
          p.style.filter='drop-shadow(0 0 6px rgba(0,224,255,.6))';
          document.body.appendChild(p);
          const a= Math.random()*Math.PI*2, v= 2+Math.random()*6, t= 600+Math.random()*600;
          const dx=Math.cos(a)*v, dy=Math.sin(a)*v-4;
          const start=performance.now();
          requestAnimationFrame(function tick(now){
            const dt=now-start; const nx=x+dx*dt/10, ny=y+dy*dt/10 + 0.002*dt*dt;
            p.style.transform=`translate(${nx-x}px,${ny-y}px) rotate(${dt/3}deg)`;
            p.style.opacity= String(1 - dt/t);
            if(dt<t) requestAnimationFrame(tick); else p.remove();
          });
        }
      }

      form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        // –°–Ω–∏–º–∞–µ–º ¬´–∫—Ä–∞—Å–Ω—ã–µ —Ä–∞–º–∫–∏¬ª
        $$('.danger', form).forEach(el=>el.classList.remove('danger'));

        const data = Object.fromEntries(new FormData(form).entries());
        const { game, pc, review, contact, rate } = data;

        let ok = true;
        ['game','pc','review','contact'].forEach(id=>{
          const el = form.elements[id];
          if(!el.value.trim()){ el.classList.add('danger'); ok=false; }
        });
        if(!ok){ toast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è'); return; }

        const handle = sanitizeHandle(contact);
        const payload =
`–û—Ç–∑—ã–≤ DED_SW
–ò–≥—Ä–∞: ${game}
–ö–æ–º–ø—å—é—Ç–µ—Ä: ${pc}
–û—Ü–µ–Ω–∫–∞: ${rate}/5
–ö–æ–Ω—Ç–∞–∫—Ç: ${handle}

${review}`;

        try{ await navigator.clipboard.writeText(payload); toast('–û—Ç–∑—ã–≤ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä'); }catch{}
        // –û—Ç–∫—Ä–æ–µ–º Telegram share (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–µ—Ä–µ—Ç —á–∞—Ç) + –¥–∞–¥–∏–º –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –≤ –ª–∏—á–∫—É
        const share = 'https://t.me/share/url?url=' + encodeURIComponent(location.href) + '&text=' + encodeURIComponent(payload);
        window.open(share, '_blank', 'noopener');
        setTimeout(()=>window.open('https://t.me/ded_swjr','_blank','noopener'), 200);

        confetti();
        if(window.ymID){ try{ ym(window.ymID, 'reachGoal', 'feedback_submit'); }catch{} }
        close();
      });
    })();

    // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞—Ö–æ–¥–µ
    (function(){
      const key='ded_sw_last', last=localStorage.getItem(key);
      if(last){ const el=$('.subtitle'); if(el) el.textContent='–†–∞–¥—ã –≤–∏–¥–µ—Ç—å —Å–Ω–æ–≤–∞. –ì–æ—Ç–æ–≤—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É?'; }
      localStorage.setItem(key, Date.now());
    })();
  </script>
</body>
</html>
